(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f79a6a8"],{"44a4":function(t,e,i){"use strict";i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return l}));var a=i("b7e2"),s=i("4328"),o=i.n(s);function r(t){return Object(a["a"])({url:"/Visit/GetByListQ",method:"post",data:o.a.stringify(t)})}function n(t){return Object(a["a"])({url:"/Visit/Create",method:"post",data:o.a.stringify(t)})}function l(t){return Object(a["a"])({url:"/Visit/Edit",method:"post",data:o.a.stringify(t)})}},7939:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"tempForm",staticClass:"demo-ruleForm",attrs:{model:t.tempForm,"label-position":"top","label-width":"70px"}},[i("el-card",{staticClass:"box-card"},[i("div",{attrs:{slot:"header"},slot:"header"},[i("el-button",{staticStyle:{float:"left"},attrs:{disabled:t.DisabledSave,type:"success",icon:"fa fa-save"},on:{click:function(e){1!=t.isEdit?t.createData():t.updateData()}}},[t._v(t._s(1!=t.isEdit?"حفظ":"تعديل"))]),t._v(" "),i("router-link",{staticClass:"pan-btn tiffany-btn",staticStyle:{float:"left","margin-left":"20px",padding:"10px 15px","border-radius":"6px"},attrs:{icon:"el-icon-plus",to:"/Visit/List"}},[t._v(t._s(t.$t("route.ListVisit")))])],1),t._v(" "),i("el-row",{attrs:{type:"flex"}},[i("el-col",{attrs:{span:4}},[i("el-form-item",{attrs:{prop:"FakeDate",label:t.$t("NewVisit.ReleaseDate"),rules:[{required:!0,message:"لايمكن ترك التاريخ فارغ",trigger:"blur"}]}},[i("Fake-Date",{attrs:{Value:t.tempForm.FakeDate},on:{Set:function(e){return t.tempForm.FakeDate=e}}})],1)],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{prop:"Name",placeholder:"اسم "},model:{value:t.tempForm.Name,callback:function(e){t.$set(t.tempForm,"Name",e)},expression:"tempForm.Name"}})],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"طريقة الدفع",prop:"PaymentMethod"}},[i("el-radio-group",{attrs:{"text-color":"#f78123"},model:{value:t.tempForm.PaymentMethod,callback:function(e){t.$set(t.tempForm,"PaymentMethod",e)},expression:"tempForm.PaymentMethod"}},[i("el-radio",{attrs:{label:"Cash",border:""}},[t._v(t._s(t.$t("NewVisit.Cash")))])],1)],1)],1)],1),t._v(" "),i("el-row",{attrs:{type:"flex"}},[i("el-col",[i("span",{staticStyle:{color:"#f56c6c","font-size":"16px","text-align":"center"}},[t._v(t._s(t.ValidateNote))])])],1)],1),t._v(" "),i("el-row",{attrs:{type:"flex"}},[i("el-col",{attrs:{span:24}},[i("el-card",{attrs:{shadow:"hover"}},[i("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),i("span",[t._v(t._s(t.$t("NewVisit.Items")))]),t._v(" "),i("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),i("span",[t._v(t._s(t.TotalItems.toFixed(t.$store.getters.settings.ToFixed)))]),t._v(" "),i("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),i("span",[t._v(t._s(t.$t("NewVisit.QuantityAmount")))]),t._v(" "),i("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),i("span",[t._v(t._s(t.TotalQty.toFixed(t.$store.getters.settings.ToFixed)))]),t._v(" "),i("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),i("span",[t._v(t._s(t.$t("NewVisit.TotalDiscount")))]),t._v(" "),i("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),i("span",[i("el-input-number",{attrs:{precision:2,step:1,min:0,max:100},on:{change:t.SumTotalAmmount,focus:function(t){return t.target.select()}},model:{value:t.tempForm.Discount,callback:function(e){t.$set(t.tempForm,"Discount",e)},expression:"tempForm.Discount"}})],1),t._v(" "),i("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),i("span",[t._v(t._s(t.$t("NewVisit.TotalJD")))]),t._v(" "),i("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),i("span",[t._v(t._s(t.TotalAmmount.toFixed(t.$store.getters.settings.ToFixed))+" JOD")]),t._v(" "),i("el-divider",{attrs:{direction:"vertical"}})],1)],1)],1),t._v(" "),i("el-col",{attrs:{span:10}},[i("el-form-item",[i("el-input",{attrs:{placeholder:t.$t("NewVisit.statement"),type:"textarea"},model:{value:t.tempForm.Description,callback:function(e){t.$set(t.tempForm,"Description",e)},expression:"tempForm.Description"}})],1)],1)],1)],1)},s=[],o=i("44a4"),r=i("4742"),n={name:"NewVisit",components:{FakeDate:r["a"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{TotalQty:0,TotalItems:0,TotalAmmount:0,ValidateNote:"",DisabledSave:!1,tempForm:{Id:void 0,Name:"",Tax:0,AccountInvoiceNumber:"",FakeDate:"",InvoiceVisitDate:"",PaymentMethod:"Cash",Discount:0,VendorId:2,Status:0,InventoryMovements:[]},rules:{InventoryMovements:[{type:"array",required:!0,message:"لا يمكن إستكمال عملية الشراء من غير إضافة أصناف",trigger:"change"}]},CashAccounts:[],tempRoute:{}}},created:function(){console.log("herer"),this.isEdit&&this.getdata(this.$route.params&&this.$route.params.id),this.tempRoute=Object.assign({},this.$route)},methods:{getdata:function(t){var e=this;Object(o["GetVisitById"])({Id:t}).then((function(t){console.log(t),e.tempForm=t,e.SumTotalAmmount(),e.setTagsViewTitle(),e.setPageTitle()})).catch((function(t){console.log(t)}))},updateData:function(){var t=this;this.$refs["tempForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.tempForm.Tax=parseInt(t.tempForm.Tax),t.TotalAmmount>0&&t.TotalItems>0&&t.TotalQty>0?Object(o["b"])(t.tempForm).then((function(e){t.$notify({title:"تم تعديل  بنجاح",message:"تم تعديل بنجاح",type:"success",position:"top-left",duration:1e3,showClose:!1,onClose:function(){e&&t.$router.push({path:"/Visit/List"})}})})).catch((function(t){console.log(t)})):t.ValidateNote="القيمة الإجمالية تساوي صفر  "}))},createData:function(){var t=this;this.$refs["tempForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.tempForm.Tax=parseInt(t.tempForm.Tax),t.TotalAmmount>0&&t.TotalItems>0&&t.TotalQty>0?(t.DisabledSave=!0,Object(o["a"])(t.tempForm).then((function(e){t.$router.push({path:"/Visit/List"}),t.$notify({title:"تم الإضافة بنجاح",message:"تم الإضافة بنجاح",type:"success",position:"top-left",duration:1e3,showClose:!1})})).catch((function(e){console.log(e),t.DisabledSave=!1}))):t.ValidateNote="القيمة الإجمالية تساوي صفر  "}))},setTagsViewTitle:function(){var t="Edit Visit",e=Object.assign({},this.tempRoute,{title:"".concat(t,"-").concat(this.tempForm.Id)});this.$store.dispatch("tagsView/updateVisitdView",e)},setPageTitle:function(){var t="Edit Visit";document.title="".concat(t," - ").concat(this.tempForm.Id)}}},l=n,c=i("2877"),u=Object(c["a"])(l,a,s,!1,null,null,null);e["a"]=u.exports},e381:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",["Public"==t.$store.getters.settings.Visit.Layout?i("Public",{attrs:{"is-edit":!1}}):t._e()],1)},s=[],o=i("7939"),r={name:"CreateVisit",components:{Public:o["a"]},created:function(){console.log("hereee",this.$store.getters.settings.Visit.Layout)}},n=r,l=i("2877"),c=Object(l["a"])(n,a,s,!1,null,null,null);e["default"]=c.exports}}]);