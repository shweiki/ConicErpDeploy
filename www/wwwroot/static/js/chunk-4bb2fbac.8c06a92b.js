(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bb2fbac"],{"0eb9":function(t,e,a){"use strict";a.d(e,"e",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return u})),a.d(e,"d",(function(){return c}));var n=a("b7e2"),l=a("4328"),r=a.n(l);function s(t){return Object(n["a"])({url:"/Salary/Update",method:"post",data:r.a.stringify(t)})}function o(t){return Object(n["a"])({url:"/Salary/GetSalaryByEmployeeId",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/Salary/GetLastSalaryById",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/Salary/GetById",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/Salary/GetSalaryId",method:"get",params:t})}},"2f21":function(t,e,a){"use strict";var n=a("79e5");t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"536a":function(t,e,a){"use strict";a("79f9")},"55dd":function(t,e,a){"use strict";var n=a("5ca1"),l=a("d8e8"),r=a("4bf8"),s=a("79e5"),o=[].sort,i=[1,2,3];n(n.P+n.F*(s((function(){i.sort(void 0)}))||!s((function(){i.sort(null)}))||!a("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(r(this)):o.call(r(this),l(t))}})},6724:function(t,e,a){"use strict";a("8d41");var n="@@wavesContext";function l(t,e){function a(a){var n=Object.assign({},e.value),l=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),r=l.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var s=r.getBoundingClientRect(),o=r.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":(o=document.createElement("span"),o.className="waves-ripple",o.style.height=o.style.width=Math.max(s.width,s.height)+"px",r.appendChild(o)),l.type){case"center":o.style.top=s.height/2-o.offsetHeight/2+"px",o.style.left=s.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(a.pageY-s.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(a.pageX-s.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=l.color,o.className="waves-ripple z-active",!1}}return t[n]?t[n].removeHandle=a:t[n]={removeHandle:a},a}var r={bind:function(t,e){t.addEventListener("click",l(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[n].removeHandle,!1),t.addEventListener("click",l(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[n].removeHandle,!1),t[n]=null,delete t[n]}},s=function(t){t.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(s)),r.install=s;e["a"]=r},7514:function(t,e,a){"use strict";var n=a("5ca1"),l=a("0a49")(5),r="find",s=!0;r in[]&&Array(1)[r]((function(){s=!1})),n(n.P+n.F*s,"Array",{find:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(r)},"79f9":function(t,e,a){},"8d41":function(t,e,a){},a0a9:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:8}},[a("Search-By-Date",{attrs:{Value:[t.listQuery.DateFrom,t.listQuery.DateTo]},on:{Set:function(e){t.listQuery.DateFrom=e[0],t.listQuery.DateTo=e[1],t.handleFilter()}}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("Sort-Options",{attrs:{Value:t.listQuery.Sort},on:{Set:function(e){t.listQuery.Sort=e,t.handleFilter()}}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("Drawer-Print",{staticStyle:{float:"left"},attrs:{Type:"SalaryPayment",Data:t.tempForm}})],1)],1),t._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{span:24,xs:24}},[a("el-card",{staticClass:"box-card"},[a("Status-Tag",{attrs:{Status:t.tempForm.Status,TableName:"SalaryPayment"}}),t._v(" "),a("el-descriptions",{staticClass:"margin-top",attrs:{title:"احتساب الراتب",column:3,border:""}},[a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" الراتب الاساسي ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.tempForm.GrossSalary))])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" ساعات الدوام ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.tempForm.WorkingHours))])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" اسم الموظف ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.tempForm.Name))])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" الرقم الوظيفي ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.tempForm.EmployeeId))])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" مجموع ساعات الدوام ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v("{{}}")])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" عدد أيام الدوام ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.list.reduce((function(t,e){return t+parseFloat(e.absent?0:1)}),0)))])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" صافي الراتب ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(parseFloat(t.tempForm.GrossSalary)+t.tempForm.SalaryAdjustmentLogs.reduce((function(t,e){return t+parseFloat(e.AdjustmentAmmount)}),0)))])],2)],1),t._v(" "),a("el-button",{attrs:{disabled:t.DisabledSave,type:"success",icon:"el-icon-check"},on:{click:t.confirmData}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("adjustment-bind",{attrs:{EmployeeId:t.tempForm.EmployeeId,EmployeeName:t.tempForm.Name,SalaryPaymentId:t.tempForm.Id,GrossSalary:t.tempForm.GrossSalary}}),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading2,expression:"listLoading2"}],attrs:{height:"200",data:t.tempForm.SalaryAdjustmentLogs,border:"","highlight-current-row":""},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"Id",label:"رقم",width:"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Name",label:"التسوية",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Description",label:"ملاحظات",width:"160",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"AdjustmentAmmount",label:"القيمة",align:"center"}})],1)],1)],1)],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{label:t.$t("Vendors.ID"),prop:"Id",sortable:"custom",align:"center",width:"80","class-name":t.getSortClass("id")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.Id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"اليوم",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t.days[n.Day]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"التاريخ",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t._f("parseTime")(n.Date,"{y}-{m}-{d}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"الدخول",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t._f("parseTime")(n.StartDateTime,"{h}:{i}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"الخروج",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t._f("parseTime")(n.EndDateTime,"{h}:{i}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"غياب",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.absent?"غياب":"حضور"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"الوصف",prop:"Description",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",label:"عدد ساعات الدوام",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.WorkTime.toFixed(t.$store.getters.settings.ToFixed)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"الزيادة والنقص",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((e.row.WorkTime-t.tempForm.WorkingHours).toFixed(t.$store.getters.settings.ToFixed)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"الاجرائات ",width:"120",align:"center"}},[a("el-button",[t._v(" اتخاذ اجراء")])],1)],1)],1)},l=[],r=(a("55dd"),a("0eb9")),s=(a("8932"),a("64af")),o=a("00f2"),i=a("2cba"),u=a("44b4"),c=a("d1b8"),m=(a("ed08"),a("5333")),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{attrs:{type:"warning",icon:"el-icon-circle-plus",round:""},on:{click:function(e){t.dialogFormVisible=!0}}},[a("span",{staticStyle:{"font-size":"14px"}},[t._v("إيرادات \\ إقتطاعات ")])]),t._v(" "),a("el-dialog",{staticStyle:{"margin-top":"-13vh"},attrs:{"show-close":!1,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("div",{staticClass:"dialog-footer",attrs:{slot:"title"},slot:"title"},[a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{float:"left"},attrs:{icon:"fa fa-save",type:"primary"},on:{click:function(e){return t.createData()}}})],1),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-divider",[t._v(" إيرادات \\ إقتطاعات ")])],1)],1),t._v(" "),a("el-form",{ref:"EmployeeLogForm",staticClass:"demo-form-inline",attrs:{model:t.tempForm,"label-position":"top"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"EmployeeName",label:"اسم الموظف"}},[a("el-input",{attrs:{disabled:""},model:{value:t.EmployeeName,callback:function(e){t.EmployeeName=e},expression:"EmployeeName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"EmployeeId",label:"الرقم الوظيفي"}},[a("el-input",{attrs:{disabled:""},model:{value:t.EmployeeId,callback:function(e){t.EmployeeId=e},expression:"EmployeeId"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"AdjustmentId",label:"التسوية"}},[a("Select-Adjustment",{attrs:{GrossSalary:t.GrossSalary,Value:t.tempForm.AdjustmentId},on:{SetAdjustment:function(e){t.tempForm.AdjustmentId=e},SetAdjustmentAmount:function(e){t.tempForm.AdjustmentAmmount=e}}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"القيمة "}},[a("currency-input",{staticClass:"currency-input",attrs:{rules:[{required:!0,message:"لايمكن ترك القيمة فارغ",trigger:"blur"}],"value-range":{min:-1e3,max:1e3}},on:{focus:function(t){return t.target.select()}},model:{value:t.tempForm.AdjustmentAmmount,callback:function(e){t.$set(t.tempForm,"AdjustmentAmmount",e)},expression:"tempForm.AdjustmentAmmount"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"Description",label:"ملاحظات "}},[a("el-input",{model:{value:t.tempForm.Description,callback:function(e){t.$set(t.tempForm,"Description",e)},expression:"tempForm.Description"}})],1)],1)],1)],1)},p=[],f=(a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{attrs:{span:24}},[a("el-select",{attrs:{filterable:"",placeholder:"التسوية"},on:{change:t.SetVal},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.label))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.amount))])])})),1)],1)],1)}),v=[],g=(a("7514"),a("b4ef")),y={props:["Value","GrossSalary"],data:function(){return{value:1,options:[]}},watch:{Value:function(t){null!=t&&void 0!=t&&(this.value=this.options.find((function(e){return e.value==t})).value,this.SetVal(this.value))},GrossSalary:function(t){t>0?(this.GrossSalary=t,this.SetVal(this.value)):this.GrossSalary=0}},mounted:function(){this.getdata()},methods:{getdata:function(){var t=this;this.loading=!0,Object(g["b"])().then((function(e){t.options=e,t.SetVal(t.value),t.loading=!1})).catch((function(t){console.log(t)}))},SetVal:function(t){if(t){var e=this.options.find((function(e){return e.value==t}));this.$emit("SetAdjustment",e.value),this.$emit("SetAdjustmentAmount","Percentage"==e.type?e.amount*this.GrossSalary:e.amount)}}}},b=y,h=a("2877"),_=Object(h["a"])(b,f,v,!1,null,null,null),S=_.exports,w=a("b7e2"),F=a("4328"),D=a.n(F);function j(t){return Object(w["a"])({url:"/SalaryAdjustmentLog/Create",method:"post",data:D.a.stringify(t)})}var x={name:"Adjustment",props:{EmployeeId:{type:Number},EmployeeName:{type:String},SalaryPaymentId:{type:Number},GrossSalary:{type:Number}},components:{SelectAdjustment:S},data:function(){return{dialogFormVisible:!1,tempForm:{Id:void 0,AdjustmentAmmount:0,Description:"",Status:0,AdjustmentId:void 0,SalaryPaymentId:void 0}}},mounted:function(){this.resetTempForm()},methods:{getData:function(t){},resetTempForm:function(){this.tempForm={Id:void 0,AdjustmentAmmount:0,Description:"",Status:0,AdjustmentId:void 0,SalaryPaymentId:void 0}},createData:function(){var t=this;this.$refs["dataForm"],this.tempForm.SalaryPaymentId=this.SalaryPaymentId,j(this.tempForm).then((function(e){t.dialogFormVisible=!1,t.$notify({title:"تم ",message:"تم الإضافة بنجاح",type:"success",duration:2e3})})).catch((function(t){console.log(t)}))}}},A=x,I=Object(h["a"])(A,d,p,!1,null,null,null),k=I.exports,T=a("6724"),E=a("84f0"),L={name:"Profile",components:{DialogActionLog:c["a"],SortOptions:m["a"],RadioOprations:u["a"],SearchByDate:s["a"],AdjustmentBind:k,DrawerPrint:i["a"],StatusTag:o["a"]},directives:{waves:T["a"]},data:function(){return{activeTab:"Details",DisabledSave:!1,loading:!0,tableData:[],tempForm:{Id:void 0,EmployeeId:void 0,GrossSalary:0,NetSalary:0,SalaryFrom:new Date,SalaryTo:new Date,status:0,WorkingHours:0,Name:"",SalaryAdjustmentLogs:[]},list:[],listLoading:!1,listLoading2:!1,listQuery:{Page:1,limit:this.$store.getters.settings.LimitQurey,Sort:"-id",DateFrom:"",DateTo:"",Status:0,TableName:"Employee",UserId:void 0},days:["الاحد","الاثنين","الثلاثاء","الاربعاء","الخميس","الجمعة","السبت"]}},created:function(){},methods:{getdata:function(){var t=this;Object(r["a"])({Id:this.$route.params&&this.$route.params.id}).then((function(e){t.tempForm=e,t.listQuery.UserId=t.tempForm.EmployeeId,Object(E["d"])(t.listQuery).then((function(e){t.list=t.GenerateWorkHoursLog(t.listQuery.DateFrom,t.listQuery.DateTo,e),t.listLoading2=!1}))})),this.loading=!1},confirmData:function(){var t=this;this.DisabledSave=!0,Object(r["e"])(this.tempForm).then((function(e){t.tempForm=e})).then((function(e){e&&(t.DisabledSave=!1)}))},GenerateWorkHoursLog:function(t,e,a){var n=[];t=new Date(t),e=new Date(e);var l=new Date(t.getFullYear(),t.getMonth(),t.getDate());while(l<=e){var r=a.filter((function(t){return new Date(t.DateTime).getDate()===l.getDate()})),s=[new Date(Math.min.apply(null,r.map((function(t){return new Date(t.DateTime)})))),new Date(Math.max.apply(null,r.map((function(t){return new Date(t.DateTime)}))))];n.push({Id:n.length+1,Day:l.getDay(),Date:l,StartDateTime:s[0],EndDateTime:s[1],WorkTime:parseInt(Math.abs(s[1]-s[0])/36e5%24)+parseInt(Math.abs(s[1].getTime()-s[0].getTime())/6e4%60)/100,absent:r.length<=0,logs:r}),l=new Date(l.getFullYear(),l.getMonth(),l.getDate()+1)}return n},handleFilter:function(){this.listQuery.Page=1,this.getdata()},sortChange:function(t){var e=t.prop,a=t.order;"id"===e&&this.sortById(a)},sortById:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleFilter()},getSortClass:function(t){var e=this.listQuery.sort;return e==="+".concat(t)?"ascending":"descending"}}},O=L,G=(a("536a"),Object(h["a"])(O,n,l,!1,null,null,null));e["default"]=G.exports},b4ef:function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return u}));var n=a("b7e2"),l=a("4328"),r=a.n(l);function s(t){return Object(n["a"])({url:"/Adjustment/GetPAdjustments",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/Adjustment/GetRAdjustments",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/Adjustment/Create",method:"post",data:r.a.stringify(t)})}function u(t){return Object(n["a"])({url:"/Adjustment/GetAdjustmentLabel",method:"get",params:t})}},f2f8:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var n=a("b7e2");a("4328");function l(t){return Object(n["a"])({url:"/ActionLog/GetLogByObjTable",method:"get",params:t})}}}]);