(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4564f064"],{"0eb9":function(t,e,a){"use strict";a.d(e,"b",(function(){return l})),a.d(e,"a",(function(){return s})),a.d(e,"e",(function(){return i})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return u}));var n=a("b7e2"),o=a("4328"),r=a.n(o);function l(t){return Object(n["a"])({url:"/Salary/Edit",method:"post",data:r.a.stringify(t)})}function s(t){return Object(n["a"])({url:"/Salary/Create",method:"post",data:r.a.stringify(t)})}function i(t){return Object(n["a"])({url:"/Salary/GetSalaryByEmployeeId",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/Salary/GetLastSalaryById",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/Salary/GetById",method:"get",params:t})}},"2f21":function(t,e,a){"use strict";var n=a("79e5");t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"536a":function(t,e,a){"use strict";a("79f9")},"55dd":function(t,e,a){"use strict";var n=a("5ca1"),o=a("d8e8"),r=a("4bf8"),l=a("79e5"),s=[].sort,i=[1,2,3];n(n.P+n.F*(l((function(){i.sort(void 0)}))||!l((function(){i.sort(null)}))||!a("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(r(this)):s.call(r(this),o(t))}})},6724:function(t,e,a){"use strict";a("8d41");var n="@@wavesContext";function o(t,e){function a(a){var n=Object.assign({},e.value),o=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),r=o.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var l=r.getBoundingClientRect(),s=r.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(l.width,l.height)+"px",r.appendChild(s)),o.type){case"center":s.style.top=l.height/2-s.offsetHeight/2+"px",s.style.left=l.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-l.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-l.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=o.color,s.className="waves-ripple z-active",!1}}return t[n]?t[n].removeHandle=a:t[n]={removeHandle:a},a}var r={bind:function(t,e){t.addEventListener("click",o(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[n].removeHandle,!1),t.addEventListener("click",o(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[n].removeHandle,!1),t[n]=null,delete t[n]}},l=function(t){t.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(l)),r.install=l;e["a"]=r},7514:function(t,e,a){"use strict";var n=a("5ca1"),o=a("0a49")(5),r="find",l=!0;r in[]&&Array(1)[r]((function(){l=!1})),n(n.P+n.F*l,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(r)},"79f9":function(t,e,a){},"8d41":function(t,e,a){},a0a9:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:8}},[a("Search-By-Date",{attrs:{Value:[t.tempForm.SalaryFrom,t.tempForm.SalaryTo]},on:{Set:function(e){t.listQuery.DateFrom=e[0],t.listQuery.DateTo=e[1]}}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("Sort-Options",{attrs:{Value:t.listQuery.Sort},on:{Set:function(e){t.listQuery.Sort=e}}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("Drawer-Print",{attrs:{Type:"SalaryPayment",Data:t.tempForm}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{disabled:t.DisabledSave,type:"success",icon:"el-icon-check"},on:{click:t.confirmData}})],1)],1),t._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{span:24,xs:24}},[a("el-card",{staticClass:"box-card"},[a("Status-Tag",{attrs:{Status:t.tempForm.Status,TableName:"SalaryPayment"}}),t._v(" "),a("el-descriptions",{staticClass:"margin-top",attrs:{title:"احتساب الراتب",column:3,border:""}},[a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" الراتب الاساسي ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.tempForm.GrossSalary))])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" ساعات الدوام ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.tempForm.WorkingHours))])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" اسم الموظف ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.tempForm.Name))])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" الرقم الوظيفي ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.tempForm.EmployeeId))])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" مجموع ساعات ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.list.reduce((function(t,e){return t+e.WorkTime}),0).toFixed(t.$store.getters.settings.ToFixed)))])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" مجموع ساعات التأخير ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.tempForm.DelayHours))])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" مجموع ساعات إضافي ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.tempForm.ExtraHours))])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" عدد أيام الدوام ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(30-t.list.reduce((function(t,e){return t+parseFloat(e.absent?1:0)}),0)))])],2),t._v(" "),a("el-descriptions-item",{attrs:{"label-style":{"text-align":"right"},"content-style":{"text-align":"right"}}},[a("template",{slot:"label"},[t._v(" صافي الراتب ")]),t._v(" "),a("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.tempForm.NetSalary))])],2)],1)],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("Add-Salary-Adjustment-Log",{attrs:{EmployeeId:t.tempForm.EmployeeId,EmployeeName:t.tempForm.Name,SalaryPaymentId:t.tempForm.Id,GrossSalary:t.tempForm.GrossSalary,ExtraHours:t.tempForm.ExtraHours,DelayHours:t.tempForm.DelayHours}}),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading2,expression:"listLoading2"}],attrs:{height:"220",data:t.tempForm.SalaryAdjustmentLogs,border:"","highlight-current-row":""},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"Id",label:"رقم",width:"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Name",label:"التسوية",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Description",label:"ملاحظات",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"AdjustmentAmmount",label:"القيمة",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"تعديل",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("edit-salary-adjustment-log",{attrs:{Id:n.Id}}),t._v(" "),a("Delete-Salary-Adjustment-Log",{attrs:{Id:n.Id}})]}}])})],1)],1)],1)],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{label:t.$t("Vendors.ID"),prop:"Id",sortable:"custom",align:"center",width:"80","class-name":t.getSortClass("id")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.Id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"اليوم",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t.days[n.Day]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"التاريخ",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t._f("parseTime")(n.Date,"{y}-{m}-{d}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"الدخول",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t._f("parseTime")(n.StartDateTime,"{h}:{i}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"الخروج",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t._f("parseTime")(n.EndDateTime,"{h}:{i}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"غياب",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.absent?"غياب":"حضور"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",label:"عدد ساعات الدوام",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.WorkTime.toFixed(t.$store.getters.settings.ToFixed)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"ساعات تأخير",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.DelayHours.toFixed(t.$store.getters.settings.ToFixed)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"ساعات إضافي",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.ExtraHours.toFixed(t.$store.getters.settings.ToFixed)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"#",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("dialog-log-device",{attrs:{Log:e.row.logs,Fk:t.tempForm.EmployeeId}})]}}])})],1)],1)},o=[],r=(a("55dd"),a("0eb9")),l=(a("8932"),a("64af")),s=a("00f2"),i=a("2cba"),c=a("44b4"),u=a("d1b8"),m=(a("ed08"),a("5333")),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{attrs:{type:"warning",icon:"el-icon-circle-plus",round:""},on:{click:function(e){t.dialogFormVisible=!0}}},[a("span",{staticStyle:{"font-size":"14px"}},[t._v("إيرادات \\ إقتطاعات ")])]),t._v(" "),a("el-dialog",{staticStyle:{"margin-top":"-13vh"},attrs:{"show-close":!1,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("div",{staticClass:"dialog-footer",attrs:{slot:"title"},slot:"title"},[a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{float:"left"},attrs:{icon:"fa fa-save",type:"primary"},on:{click:function(e){return t.createData()}}})],1),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-divider",[t._v(" إيرادات \\ إقتطاعات ")])],1)],1),t._v(" "),a("el-form",{ref:"EmployeeLogForm",staticClass:"demo-form-inline",attrs:{model:t.tempForm,"label-position":"top"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"EmployeeName",label:"اسم الموظف"}},[a("el-input",{attrs:{disabled:""},model:{value:t.EmployeeName,callback:function(e){t.EmployeeName=e},expression:"EmployeeName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"EmployeeId",label:"الرقم الوظيفي"}},[a("el-input",{attrs:{disabled:""},model:{value:t.EmployeeId,callback:function(e){t.EmployeeId=e},expression:"EmployeeId"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"AdjustmentId",label:"التسوية"}},[a("Select-Adjustment",{attrs:{GrossSalary:t.GrossSalary,ExtraHours:t.ExtraHours,DelayHours:t.DelayHours,Value:t.tempForm.AdjustmentId},on:{SetAdjustment:function(e){t.tempForm.AdjustmentId=e},SetAdjustmentAmount:function(e){t.tempForm.AdjustmentAmmount=e}}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"القيمة "}},[a("currency-input",{staticClass:"currency-input",attrs:{rules:[{required:!0,message:"لايمكن ترك القيمة فارغ",trigger:"blur"}],"value-range":{min:-1e3,max:1e3}},on:{focus:function(t){return t.target.select()}},model:{value:t.tempForm.AdjustmentAmmount,callback:function(e){t.$set(t.tempForm,"AdjustmentAmmount",e)},expression:"tempForm.AdjustmentAmmount"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"Description",label:"ملاحظات "}},[a("el-input",{model:{value:t.tempForm.Description,callback:function(e){t.$set(t.tempForm,"Description",e)},expression:"tempForm.Description"}})],1)],1)],1)],1)},p=[],f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{attrs:{span:24}},[a("el-select",{attrs:{filterable:"",placeholder:"التسوية"},on:{change:t.SetVal},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.label))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.amount))])])})),1)],1)],1)},v=[],g=(a("7514"),a("b4ef")),y={props:["Value","GrossSalary","ExtraHours","DelayHours"],data:function(){return{value:1,options:[]}},watch:{Value:function(t){null!=t&&void 0!=t&&this.SetVal(t)},GrossSalary:function(t){t>0&&(this.GrossSalary=t)},ExtraHours:function(t){t>0&&(this.ExtraHours=t)},DelayHours:function(t){t<0&&(this.DelayHours=t)}},mounted:function(){this.getdata()},methods:{getdata:function(){var t=this;Object(g["b"])().then((function(e){t.options=e,t.SetVal(t.value)})).catch((function(t){console.log(t)}))},SetVal:function(t){if(t){var e=this.options.find((function(e){return e.value==t}));console.log("dis",e,this.GrossSalary,this.ExtraHours,this.DelayHours),this.$emit("SetAdjustment",t),void 0!=e&&null!=e&&("Percentage"==e.type&&this.$emit("SetAdjustmentAmount",e.amount*(this.GrossSalary||1)),"Hours"==e.type&&e.amount>0&&this.$emit("SetAdjustmentAmount",e.amount*(this.ExtraHours||1)),"Hours"==e.type&&e.amount<0&&this.$emit("SetAdjustmentAmount",e.amount*(-this.DelayHours||1)))}}}},b=y,h=a("2877"),_=Object(h["a"])(b,f,v,!1,null,null,null),D=_.exports,F=a("b7e2"),S=a("4328"),x=a.n(S);function A(t){return Object(F["a"])({url:"/SalaryAdjustmentLog/Create",method:"post",data:x.a.stringify(t)})}function j(t){return Object(F["a"])({url:"/SalaryAdjustmentLog/Edit",method:"post",data:x.a.stringify(t)})}function w(t){return Object(F["a"])({url:"/SalaryAdjustmentLog/Delete",method:"post",data:x.a.stringify(t)})}function I(t){return Object(F["a"])({url:"/SalaryAdjustmentLog/GetById",method:"get",params:t})}var E={name:"Adjustment",props:["EmployeeId","EmployeeName","SalaryPaymentId","GrossSalary","ExtraHours","DelayHours"],components:{SelectAdjustment:D},data:function(){return{dialogFormVisible:!1,tempForm:{Id:void 0,AdjustmentAmmount:0,Description:"",Status:0,AdjustmentId:void 0,SalaryPaymentId:void 0}}},mounted:function(){this.resetTempForm()},methods:{getData:function(t){},resetTempForm:function(){this.tempForm={Id:void 0,AdjustmentAmmount:0,Description:"",Status:0,AdjustmentId:void 0,SalaryPaymentId:void 0}},createData:function(){var t=this;this.$refs["dataForm"],this.tempForm.SalaryPaymentId=this.SalaryPaymentId,A(this.tempForm).then((function(e){t.dialogFormVisible=!1,t.$notify({title:"تم ",message:"تم الإضافة بنجاح",type:"success",duration:2e3})})).catch((function(t){console.log(t)}))}}},k=E,T=Object(h["a"])(k,d,p,!1,null,null,null),V=T.exports,L=a("6724"),$=a("84f0"),H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{attrs:{type:"warning",icon:"el-icon-search",size:t.$store.getters.size},on:{click:function(e){t.dialogFormVisible=!0}}}),t._v(" "),a("el-dialog",{staticStyle:{"margin-top":"-13vh"},attrs:{"show-close":!1,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("div",{staticClass:"dialog-footer",attrs:{slot:"title"},slot:"title"},[a("el-col",{attrs:{span:4}},[a("Add-Device-Log",{attrs:{Fk:t.Fk}})],1),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-divider",[t._v(" سيجلات الدوام ")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Log,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"رقم",prop:"Id",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"الاسم الجهاز",prop:"Name",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"التاريخ",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t._f("parseTime")(n.DateTime,"{y}-{m}-{d}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"الوقت",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t._f("parseTime")(n.DateTime,"{h}:{i}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"الوصف",prop:"Description",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"تعديل",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[a("Edit-Device-Log",{attrs:{Id:e.Id}})]}}])})],1)],1)],1)},O=[],N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["Admin"],expression:"['Admin']"}],attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.Visibles=!0}}}),t._v(" "),a("el-dialog",{staticStyle:{"margin-top":"-13vh"},attrs:{title:"تسجيل دخول",visible:t.Visibles},on:{"update:visible":function(e){t.Visibles=e}}},[a("el-form",{ref:"DeviceLogForm",staticClass:"demo-form-inline",attrs:{model:t.Temp,"label-position":"top"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"Fk",label:"الموظف"}},[a("employee-search-any",{attrs:{EmployeeId:t.Fk},on:{Set:function(e){t.Temp.TableName="Employee",t.Temp.Fk=e.Id}}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("select-device",{attrs:{Value:t.Temp.DeviceId},on:{Set:function(e){return t.Temp.DeviceId=e.Id}}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$t("AddVendors.Description"),prop:"DateTime"}},[a("Fake-Date",{attrs:{Value:t.Temp.DateTime},on:{Set:function(e){t.Temp.DateTime=e}}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$t("AddVendors.Description"),prop:"Description"}},[a("el-input",{model:{value:t.Temp.Description,callback:function(e){t.$set(t.Temp,"Description",e)},expression:"Temp.Description"}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.Visibles=!1}}},[t._v(t._s(t.$t("AddVendors.Cancel")))]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.create()}}},[t._v(t._s(t.$t("AddVendors.Save")))])],1)],1)],1)},C=[],G=a("4381"),P=a("4742"),z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{filterable:"",placeholder:"اسم الجهاز"},on:{change:t.SetVal},model:{value:t.Device,callback:function(e){t.Device=e},expression:"Device"}},t._l(t.Devices,(function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}},[a("span",{staticStyle:{color:"#8492a6","font-size":"16px"}},[t._v(t._s(e.Name))]),t._v(" "),a("span",{},[t._v(t._s(e.Id))])])})),1)},Q=[],B=a("4869"),W={props:["Value"],data:function(){return{Device:2,Devices:[]}},created:function(){var t=this;Object(B["i"])().then((function(e){t.Devices=e,t.Device=void 0==e.find((function(e){return e.Id==t.Value}))?t.Device=e[0].Id:e.find((function(e){return e.Id==t.Value})).Id,t.SetVal(t.Device)}))},methods:{SetVal:function(t){this.$emit("Set",this.Devices.find((function(e){return e.Id==t})))}}},M=W,R=Object(h["a"])(M,z,Q,!1,null,null,null),q=R.exports,Y=a("e441"),J={name:"AddDeviceLog",props:["Fk"],components:{FakeDate:P["a"],SelectDevice:q,EmployeeSearchAny:Y["a"]},directives:{permission:G["a"]},data:function(){return{Temp:{Id:void 0,Type:"Manual",Fk:void 0,DateTime:"",DeviceId:1,Status:0,TableName:"",Description:"Manual Register Log"},Visibles:!1}},methods:{create:function(){var t=this;this.$refs["DeviceLogForm"].validate((function(e){e&&Object($["b"])(t.Temp).then((function(e){t.Visibles=!1,t.$notify({title:"تم ",message:"تم الإضافة بنجاح",type:"success",duration:2e3})})).catch((function(t){console.log(t)}))}))}}},U=J,K=Object(h["a"])(U,N,C,!1,null,null,null),X=K.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["Admin"],expression:"['Admin']"}],attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.Visibles=!0}}}),t._v(" "),a("el-dialog",{staticStyle:{"margin-top":"-13vh"},attrs:{title:"تعديل ",visible:t.Visibles},on:{"update:visible":function(e){t.Visibles=e}}},[a("el-form",{ref:"DeviceLogForm",staticClass:"demo-form-inline",attrs:{model:t.Temp,"label-position":"top"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"Fk",label:"الموظف"}},[a("employee-search-any",{attrs:{EmployeeId:t.Temp.Fk},on:{Set:function(e){t.Temp.TableName="Employee",t.Temp.Fk=e.Id}}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("select-device",{attrs:{Value:t.Temp.DeviceId},on:{Set:function(e){return t.Temp.DeviceId=e.Id}}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$t("AddVendors.Description"),prop:"DateTime"}},[a("Fake-Date",{attrs:{Value:t.Temp.DateTime},on:{Set:function(e){t.Temp.DateTime=e}}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$t("AddVendors.Description"),prop:"Description"}},[a("el-input",{model:{value:t.Temp.Description,callback:function(e){t.$set(t.Temp,"Description",e)},expression:"Temp.Description"}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.Visibles=!1}}},[t._v(t._s(t.$t("AddVendors.Cancel")))]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.Edit()}}},[t._v(t._s(t.$t("AddVendors.Save")))])],1)],1)],1)},tt=[],et={name:"EditDeviceLog",props:["Id"],components:{FakeDate:P["a"],SelectDevice:q,EmployeeSearchAny:Y["a"]},directives:{permission:G["a"]},data:function(){return{Temp:{},Visibles:!1}},created:function(){var t=this;Object($["d"])({Id:this.Id}).then((function(e){t.Temp=e}))},methods:{Edit:function(){var t=this;this.$refs["DeviceLogForm"].validate((function(e){e&&Object($["c"])(t.Temp).then((function(e){t.Visibles=!1,t.$notify({title:"تم ",message:"تم تعديل بنجاح",type:"success",duration:2e3})})).catch((function(t){console.log(t)}))}))}}},at=et,nt=Object(h["a"])(at,Z,tt,!1,null,null,null),ot=nt.exports,rt={name:"DialogLogDevice",props:["Log","Fk"],components:{AddDeviceLog:X,EditDeviceLog:ot},data:function(){return{dialogFormVisible:!1}}},lt=rt,st=Object(h["a"])(lt,H,O,!1,null,null,null),it=st.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",round:""},on:{click:t.getData}}),t._v(" "),a("el-dialog",{staticStyle:{"margin-top":"-13vh"},attrs:{"show-close":!1,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("div",{staticClass:"dialog-footer",attrs:{slot:"title"},slot:"title"},[a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{float:"left"},attrs:{icon:"fa fa-save",type:"primary"},on:{click:function(e){return t.Edit()}}})],1),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-divider",[t._v("تعديل إيرادات \\ إقتطاعات ")])],1)],1),t._v(" "),a("el-form",{ref:"EmployeeLogForm",staticClass:"demo-form-inline",attrs:{model:t.tempForm,"label-position":"top"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"EmployeeName",label:"اسم الموظف"}},[a("el-input",{attrs:{disabled:""},model:{value:t.tempForm.Name,callback:function(e){t.$set(t.tempForm,"Name",e)},expression:"tempForm.Name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"EmployeeId",label:"الرقم الوظيفي"}},[a("el-input",{attrs:{disabled:""},model:{value:t.tempForm.EmployeeId,callback:function(e){t.$set(t.tempForm,"EmployeeId",e)},expression:"tempForm.EmployeeId"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"AdjustmentId",label:"التسوية"}},[a("Select-Adjustment",{attrs:{GrossSalary:t.tempForm.GrossSalary,Value:t.tempForm.AdjustmentId},on:{SetAdjustment:function(e){t.tempForm.AdjustmentId=e},SetAdjustmentAmount:function(e){t.tempForm.AdjustmentAmmount=e}}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"القيمة "}},[a("currency-input",{staticClass:"currency-input",attrs:{rules:[{required:!0,message:"لايمكن ترك القيمة فارغ",trigger:"blur"}],"value-range":{min:-1e3,max:1e3}},on:{focus:function(t){return t.target.select()}},model:{value:t.tempForm.AdjustmentAmmount,callback:function(e){t.$set(t.tempForm,"AdjustmentAmmount",e)},expression:"tempForm.AdjustmentAmmount"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"Description",label:"ملاحظات "}},[a("el-input",{model:{value:t.tempForm.Description,callback:function(e){t.$set(t.tempForm,"Description",e)},expression:"tempForm.Description"}})],1)],1)],1)],1)},ut=[],mt={props:["Id"],components:{SelectAdjustment:D},data:function(){return{dialogFormVisible:!1,tempForm:{Id:void 0,AdjustmentAmmount:0,Description:"",Status:0,AdjustmentId:void 0,SalaryPaymentId:void 0}}},methods:{getData:function(){var t=this;I({Id:this.Id}).then((function(e){t.tempForm=e})),this.dialogFormVisible=!0},Edit:function(){var t=this;this.$refs["dataForm"],this.tempForm.SalaryPaymentId=this.SalaryPaymentId,j(this.tempForm).then((function(e){t.dialogFormVisible=!1,t.$notify({title:"تم ",message:"تم الإضافة بنجاح",type:"success",duration:2e3})})).catch((function(t){console.log(t)}))}}},dt=mt,pt=Object(h["a"])(dt,ct,ut,!1,null,null,null),ft=pt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-popconfirm",{attrs:{"confirm-button-text":"OK","cancel-button-text":"No, Thanks",icon:"el-icon-info","icon-color":"red",title:"Are you sure to delete this?"},on:{confirm:t.Delete}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",round:""},slot:"reference"})],1)},gt=[],yt={props:["Id"],data:function(){return{dialogFormVisible:!1}},methods:{Delete:function(){var t=this;w({Id:this.Id}).then((function(e){t.$notify({title:"تم ",message:"تم حذف بنجاح"+e,type:"danger",duration:2e3})})).catch((function(t){console.log(t)}))}}},bt=yt,ht=Object(h["a"])(bt,vt,gt,!1,null,null,null),_t=ht.exports,Dt={name:"Profile",components:{DialogActionLog:u["a"],SortOptions:m["a"],RadioOprations:c["a"],SearchByDate:l["a"],AddSalaryAdjustmentLog:V,DrawerPrint:i["a"],StatusTag:s["a"],DialogLogDevice:it,EditSalaryAdjustmentLog:ft,DeleteSalaryAdjustmentLog:_t},directives:{waves:L["a"]},data:function(){return{activeTab:"Details",DisabledSave:!1,loading:!0,tableData:[],tempForm:{Id:void 0,EmployeeId:void 0,GrossSalary:0,NetSalary:0,SalaryFrom:"",SalaryTo:"",status:0,WorkingHours:0,Name:"",SalaryAdjustmentLogs:[],ExtraHours:0,DelayHours:0},list:[],listLoading:!1,listLoading2:!1,listQuery:{Page:1,limit:this.$store.getters.settings.LimitQurey,Sort:"-id",DateFrom:"",DateTo:"",Status:0,TableName:"Employee",UserId:void 0},days:["الاحد","الاثنين","الثلاثاء","الاربعاء","الخميس","الجمعة","السبت"]}},created:function(){this.getdata()},methods:{getdata:function(){var t=this;Object(r["c"])({Id:this.$route.params&&this.$route.params.id}).then((function(e){t.tempForm=e,t.listQuery.UserId=t.tempForm.EmployeeId,Object($["f"])(t.listQuery).then((function(e){t.list=t.GenerateWorkHoursLog(t.listQuery.DateFrom,t.listQuery.DateTo,e),t.tempForm.ExtraHours=t.list.reduce((function(t,e){return t+e.ExtraHours}),0).toFixed(t.$store.getters.settings.ToFixed),t.tempForm.DelayHours=t.list.reduce((function(t,e){return t+e.DelayHours}),0).toFixed(t.$store.getters.settings.ToFixed),t.tempForm.NetSalary=(parseFloat(t.tempForm.GrossSalary)+t.tempForm.SalaryAdjustmentLogs.reduce((function(t,e){return t+parseFloat(e.AdjustmentAmmount)}),0)).toFixed(t.$store.getters.settings.ToFixed),t.listLoading2=!1}))})),this.loading=!1},confirmData:function(){var t=this;this.DisabledSave=!0,this.tempForm.Status=0,Object(r["b"])(this.tempForm).then((function(e){t.$notify({title:"تم ",message:"تم احتساب بنجاح"+e,type:"success",duration:2e3})})).then((function(e){e&&(t.DisabledSave=!1)}))},GenerateWorkHoursLog:function(t,e,a){var n=[];t=new Date(t),e=new Date(e);var o=new Date(t.getFullYear(),t.getMonth(),t.getDate());while(o<=e){var r=a.filter((function(t){return new Date(t.DateTime).getDate()===o.getDate()})),l=[new Date(Math.min.apply(null,r.map((function(t){return new Date(t.DateTime)})))),new Date(Math.max.apply(null,r.map((function(t){return new Date(t.DateTime)}))))],s=parseInt(Math.abs(l[1]-l[0])/36e5%24)+parseInt(Math.abs(l[1].getTime()-l[0].getTime())/6e4%60)/100||0,i=s-this.tempForm.WorkingHours>0?s-this.tempForm.WorkingHours:0,c=s-this.tempForm.WorkingHours<0?s-this.tempForm.WorkingHours:0;n.push({Id:n.length+1,Day:o.getDay(),Date:o,StartDateTime:l[0],EndDateTime:l[1],WorkTime:s,ExtraHours:i,DelayHours:c,absent:r.length<=0,logs:r}),o=new Date(o.getFullYear(),o.getMonth(),o.getDate()+1)}return n},handleFilter:function(){this.listQuery.Page=1,this.getdata()},sortChange:function(t){var e=t.prop,a=t.order;"id"===e&&this.sortById(a)},sortById:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleFilter()},getSortClass:function(t){var e=this.listQuery.sort;return e==="+".concat(t)?"ascending":"descending"}}},Ft=Dt,St=(a("536a"),Object(h["a"])(Ft,n,o,!1,null,null,null));e["default"]=St.exports},b4ef:function(t,e,a){"use strict";a.d(e,"c",(function(){return l})),a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return c}));var n=a("b7e2"),o=a("4328"),r=a.n(o);function l(t){return Object(n["a"])({url:"/Adjustment/GetPAdjustments",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/Adjustment/GetRAdjustments",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/Adjustment/Create",method:"post",data:r.a.stringify(t)})}function c(t){return Object(n["a"])({url:"/Adjustment/GetAdjustmentLabel",method:"get",params:t})}},bdb5:function(t,e,a){"use strict";a.d(e,"g",(function(){return l})),a.d(e,"d",(function(){return s})),a.d(e,"f",(function(){return i})),a.d(e,"a",(function(){return c})),a.d(e,"e",(function(){return u})),a.d(e,"h",(function(){return m})),a.d(e,"b",(function(){return d})),a.d(e,"c",(function(){return p}));var n=a("b7e2"),o=a("4328"),r=a.n(o);function l(t){return Object(n["a"])({url:"/Employee/GetEmployeeByAny",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/Employee/FixPhoneNumber",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/Employee/GetByListQ",method:"post",data:r.a.stringify(t)})}function c(t){return Object(n["a"])({url:"/Employee/CheckEmployeeIsExist",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/Employee/GetActiveEmployee",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/Employee/GetEmployeeById",method:"get",params:t})}function d(t){return Object(n["a"])({url:"/Employee/Create",method:"post",data:r.a.stringify(t)})}function p(t){return Object(n["a"])({url:"/Employee/Edit",method:"post",data:r.a.stringify(t)})}},f2f8:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n=a("b7e2");a("4328");function o(t){return Object(n["a"])({url:"/ActionLog/GetLogByObjTable",method:"get",params:t})}}}]);