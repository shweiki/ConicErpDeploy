(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b1c32"],{"20db":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("search-by-date",{on:{change:e.getdata}})],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("span",{staticClass:"demonstration"},[e._v(e._s(e.$t("ItemSales.Name")))]),e._v(" "),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:e.$t("ItemSales.Name")},on:{change:e.getdata},model:{value:e.ItemId,callback:function(t){e.ItemId=t},expression:"ItemId"}},e._l(e.Items,(function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})})),1),e._v(" "),a("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),a("span",[e._v("عدد الطلبات")]),e._v(" "),a("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),a("span",[e._v(e._s(e.tableData.length))]),e._v(" "),a("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),a("span",[e._v("العدد الكلي")]),e._v(" "),a("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),a("span",[e._v(e._s(e.TotalQty.toFixed(3))+" JOD")]),e._v(" "),a("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),a("span",[e._v("القمية الكلية")]),e._v(" "),a("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),a("span",[e._v(e._s(e.TotalAmmount.toFixed(3))+" JOD")]),e._v(" "),a("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{icon:"el-icon-printer",type:"primary"},on:{click:function(t){return e.print(e.tableData)}}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"default-sort":{prop:"FakeDate",order:"ascending"},data:e.tableData.filter((function(t){return!e.search||t.Account.AccountName.toLowerCase().includes(e.search.toLowerCase())})),fit:"",border:"","max-height":"900","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"#",prop:"Id",width:"120",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.getdata}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Type",label:"العملية",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"FakeDate",label:e.$t("ItemSales.Date"),sortable:"",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Name",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{placeholder:e.$t("ItemSales.Customer")},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Qty",label:"الكمية",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Qty.toFixed(3)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"SellingPrice",label:"سعر",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.SellingPrice.toFixed(3)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("ItemSales.Amountv"),width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s((t.row.Qty*t.row.SellingPrice).toFixed(3))+"\n          JOD")]}}])})],1)],1)],1)},n=[],r=(a("7514"),a("64af")),i=a("e225"),o=a("add5"),s=a.n(o),c={name:"SalesItem",components:{SearchByDate:r["a"]},data:function(){return{ItemId:2,Items:[],tableData:[],loading:!0,TotalQty:0,TotalAmmount:0,search:""}},created:function(){var e=this;this.getdata(),Object(i["d"])().then((function(t){console.log(t),e.Items=t,e.loading=!1}))},methods:{print:function(e){var t=this;e=e.map((function(e){return{FakeDate:e.FakeDate,Name:e.Name,Qty:e.Qty,SellingPrice:e.SellingPrice,Total:(e.SellingPrice*e.Qty).toFixed(3)}})),s()({printable:e,properties:[{field:"FakeDate",displayName:"تاريخ"},{field:"Name",displayName:"اسم الزبون"},{field:"Qty",displayName:"الكمية"},{field:"SellingPrice",displayName:"سعر"},{field:"Total",displayName:"القيمة"}],type:"json",header:"<center> <h2>حركة الصنف "+this.Items.find((function(e){return e.Id==t.ItemId})).Name+"</h2></center> <h3 style='float:left'>   الاجمالي الكمية:  "+this.TotalQty.toFixed(3)+"</h3><h3 style='float:right'>  الفترة  : "+this.formatDate(this.date[0])+" - "+this.formatDate(this.date[1])+"</h3>",gridHeaderStyle:"color: red;  border: 2px solid #3971A5;",gridStyle:"border: 2px solid #3971A5; text-align: center;"})},getdata:function(){var e=this;this.loading=!0,Object(i["h"])({ItemId:this.ItemId,DateFrom:this.$store.state.settings.datepickerQuery[0],DateTo:this.$store.state.settings.datepickerQuery[1]}).then((function(t){console.log(t),e.tableData=t.OrderInventoryMove.concat(t.SalesInvoiceMove.concat(t.PurchaseInvoiceMove)),console.log(e.tableData),e.TotalQty=e.tableData.reduce((function(e,t){return e+t.Qty}),0),e.TotalAmmount=e.tableData.reduce((function(e,t){return e+t.Qty*t.SellingPrice}),0),e.loading=!1})).catch((function(e){console.log(e)}))},formatDate:function(e){var t=new Date(e),a=""+t.getDate(),l=""+(t.getMonth()+1),n=t.getFullYear();return l.length<2&&(l="0"+l),a.length<2&&(a="0"+a),[a,l,n].join("/")}}},d=c,u=a("2877"),v=Object(u["a"])(d,l,n,!1,null,null,null);t["default"]=v.exports}}]);